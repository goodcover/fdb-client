# Camel case stuff is for this plugin specifically and the "normal" stuff is -.
#
# Fdb namespace journal plugin
fdb {

  ## NB: This is the default config for the FoundationDbConfig defaults should match these

  # Minimum number of connections to maintain in the connection pool
  # Default: 1
  minConnections = 1

  # Maximum number of connections allowed in the connection pool
  # Default: 50
  maxConnections = 50

  # FoundationDB API version to use (e.g., 710, 720)
  # This should match your FoundationDB server version
  # Default: 710
  apiVersion = 710

  # Path to the FoundationDB cluster file
  # If not specified, the default cluster file location will be used
  # Default: null (uses default location)
  # clusterFile = "/path/to/fdb.cluster"

  # Whether to search for the cluster file in default locations
  # Default: false
  searchClusterFile = "true"

  # Retry policy for failed operations
  # Format: "e<milliseconds>" for exponential backoff (e.g., "e10" = exponential starting at 10ms)
  # Default: "e10"
  retryPolicy = "e10"

  # Time to live for database connections before they are recycled
  # Specified in seconds
  # Default: 30 seconds
  timeToLive = 30

  # Whether to perform classloader fixes for FoundationDB native library loading
  # This can help with classloader issues in some environments
  # Default: true
  performClassLoaderFixes = true

  # Whether to warn when database connections are not properly closed
  # Useful for debugging resource leaks
  # Default: false
  warnOnUnclosed = false

  # Explicitly set the path to the FoundationDB C library (libfdb_c)
  # If not specified, the library will be loaded from the default location
  # Default: null (uses default location)
  # setFdbCLibraryPath = "/path/to/libfdb_c.so"

  # Whether to get the FoundationDB C library path from environment variables
  # Default: true
  getFdbCLibraryFromEnv = true

  journal {
    # Class name of the plugin.
    class = "com.goodcover.fdb.es.pekko.FdbJournal"
    # Dispatcher for the plugin actor.
    plugin-dispatcher = "pekko.actor.default-dispatcher"
  }


  # Fdb journal plugin
  snapshot-store {
    # Class name of the plugin.
    class = "com.goodcover.fdb.es.pekko.FdbSnapshotStore"
    # Dispatcher for the plugin actor.
    plugin-dispatcher = "pekko.actor.default-dispatcher"

    # Specify a filter at the store level to reject snapshots
    snapshotFilter = null
  }

  query {
    class = "com.goodcover.fdb.es.pekko.FdbQueryReadProvider"
  }

}
